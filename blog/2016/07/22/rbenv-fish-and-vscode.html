<!DOCTYPE html><html lang="zh-Hant-TW" data-dark-theme="dark"><head><link rel="alternate" type="application/rss+xml" title="RSS feed for blog posts" href="https://yukai.dev/feed.xml"/><t><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-L4KRS0HB4B"></script><script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){dataLayer.push(arguments);}
                    window.gtag = gtag
                    gtag('js', new Date());

                    gtag('config', 'G-L4KRS0HB4B', {
                      page_path: window.location.pathname,
                    });
                  </script></t><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/><meta name="color-scheme" content="dark light"/><title>rbenv、fish 與 VSCode 設置之路 | Daily Oops!</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="
# rbenv、fish 與 VSCode 設置之路

在最新的 VSCode 1.3.1 版裡，Integrated Terminal 變得更加好用，但由於上游套件 `xterm.js` 的緣故，`zsh` 還是有無法捲動的問題。不過作為一個 Rails 開發者，VSCode 已經是個足夠好用的"/><meta property="og:url" content="https://yukaii.tw/blog/2016/07/22/rbenv-fish-and-vscode"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2016-07-22T00:00:00+00:00"/><meta property="article:modified_time" content="2016-07-22T00:00:00+00:00"/><meta property="og:title" content="rbenv、fish 與 VSCode 設置之路"/><meta property="og:description" content="
# rbenv、fish 與 VSCode 設置之路

在最新的 VSCode 1.3.1 版裡，Integrated Terminal 變得更加好用，但由於上游套件 `xterm.js` 的緣故，`zsh` 還是有無法捲動的問題。不過作為一個 Rails 開發者，VSCode 已經是個足夠好用的"/><meta property="og:locale" content="zh-Hant-TW"/><meta property="og:site_name" content="Daily Oops!"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/5c6e50fd72a8e9ef6daf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5c6e50fd72a8e9ef6daf.css" data-n-g=""/><link rel="preload" href="/_next/static/css/ade8143fd9f29325f449.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ade8143fd9f29325f449.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-83a824382febe0b0aadd.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-314ffb4aa8331ecb00c4.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons-d39e816c6c9de90edb11.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-ae36ed1b7923ac63ac40.js" as="script"/><link rel="preload" href="/_next/static/chunks/dbf3ce33-4a20f4b6b57bb34f60e1.js" as="script"/><link rel="preload" href="/_next/static/chunks/05062569-55a0cb2864251f3dec25.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d190e9e46e32e72c053d.js" as="script"/><link rel="preload" href="/_next/static/chunks/0e226fb0-a76c2858a8908944605d.js" as="script"/><link rel="preload" href="/_next/static/chunks/9f96d65d-50ca92f005f840760b44.js" as="script"/><link rel="preload" href="/_next/static/chunks/747-ee23ba3d0122c65eba4d.js" as="script"/><link rel="preload" href="/_next/static/chunks/946-c91ab9ec541a82c2814b.js" as="script"/><link rel="preload" href="/_next/static/chunks/962-737bc27569f7e8444c13.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bslug%5D-269495568abb97d3c563.js" as="script"/></head><body><script src="/noflash.js"></script><div id="__next"><section><div class="d-block text-center color-bg-secondary py-4 px-3"><button class="night-switch-button btn position-absolute top-4 right-4 px-2" type="button"><svg aria-hidden="true" role="img" class="octicon octicon-sun" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z"></path></svg></button><div class="CircleBadge CircleBadge--large mx-auto mb-3" style="overflow:hidden;background-color:#F5CC7F"><img src="/logo-animated.gif" alt="Daily Oops" style="height:auto;max-height:80%" class="user-select-none"/></div><h1>Daily Oops!</h1></div><nav class="UnderlineNav flex-justify-center color-bg-secondary px-3 position-sticky top-0" style="z-index:99"><div class="UnderlineNav-body" role="tablist" style="max-width:100%"><button class="UnderlineNav-item" role="tab" type="button" aria-selected="false"><svg aria-hidden="true" role="img" class="UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M1.326 1.973a1.2 1.2 0 011.49-.832c.387.112.977.307 1.575.602.586.291 1.243.71 1.7 1.296.022.027.042.056.061.084A13.22 13.22 0 018 3c.67 0 1.289.037 1.861.108l.051-.07c.457-.586 1.114-1.004 1.7-1.295a9.654 9.654 0 011.576-.602 1.2 1.2 0 011.49.832c.14.493.356 1.347.479 2.29.079.604.123 1.28.07 1.936.541.977.773 2.11.773 3.301C16 13 14.5 15 8 15s-8-2-8-5.5c0-1.034.238-2.128.795-3.117-.08-.712-.034-1.46.052-2.12.122-.943.34-1.797.479-2.29zM8 13.065c6 0 6.5-2 6-4.27C13.363 5.905 11.25 5 8 5s-5.363.904-6 3.796c-.5 2.27 0 4.27 6 4.27z"></path><path d="M4 8a1 1 0 012 0v1a1 1 0 01-2 0V8zm2.078 2.492c-.083-.264.146-.492.422-.492h3c.276 0 .505.228.422.492C9.67 11.304 8.834 12 8 12c-.834 0-1.669-.696-1.922-1.508zM10 8a1 1 0 112 0v1a1 1 0 11-2 0V8z"></path></svg><span>Home</span></button><button class="UnderlineNav-item" role="tab" type="button" aria-selected="false"><svg aria-hidden="true" role="img" class="UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M0 1.75A.75.75 0 01.75 1h4.253c1.227 0 2.317.59 3 1.501A3.744 3.744 0 0111.006 1h4.245a.75.75 0 01.75.75v10.5a.75.75 0 01-.75.75h-4.507a2.25 2.25 0 00-1.591.659l-.622.621a.75.75 0 01-1.06 0l-.622-.621A2.25 2.25 0 005.258 13H.75a.75.75 0 01-.75-.75V1.75zm8.755 3a2.25 2.25 0 012.25-2.25H14.5v9h-3.757c-.71 0-1.4.201-1.992.572l.004-7.322zm-1.504 7.324l.004-5.073-.002-2.253A2.25 2.25 0 005.003 2.5H1.5v9h3.757a3.75 3.75 0 011.994.574z"></path></svg><span>Blog</span></button><button class="UnderlineNav-item" role="tab" type="button" aria-selected="false"><svg aria-hidden="true" role="img" class="UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg><span>Projects</span></button><button class="UnderlineNav-item" role="tab" type="button" aria-selected="false"><svg aria-hidden="true" role="img" class="UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path></svg><span>About</span></button></div></nav><div class="container pt-4 pb-3 px-3" style="max-width:630px"><span class="text-mono color-text-tertiary">July 22, 2016</span></div><div><main id="main" property="schema:mainEntity"><article itemscope="" itemProp="post" typeof="schema:Article schema:BlogPosting" property="schema:articleBody" class="markdown-body container post-container pb-6 px-3"><h1 id="rbenv%E3%80%81fish-%E8%88%87-vscode-%E8%A8%AD%E7%BD%AE%E4%B9%8B%E8%B7%AF"><a class="anchor" href="#rbenv%E3%80%81fish-%E8%88%87-vscode-%E8%A8%AD%E7%BD%AE%E4%B9%8B%E8%B7%AF"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> rbenv、fish 與 VSCode 設置之路</h1>
<p>在最新的 VSCode 1.3.1 版裡，Integrated Terminal 變得更加好用，但由於上游套件 <code>xterm.js</code> 的緣故，<code>zsh</code> 還是有無法捲動的問題。不過作為一個 Rails 開發者，VSCode 已經是個足夠好用的、足矣媲美 Sublime Text 的編輯器了。為了能夠在 VSCode 開發 Rails，特別對目前的開發環境做出調整。</p>
<h2 id="%E7%94%B1-rvm-%E8%BD%89%E6%8F%9B%E8%87%B3-rbenv"><a class="anchor" href="#%E7%94%B1-rvm-%E8%BD%89%E6%8F%9B%E8%87%B3-rbenv"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 由 RVM 轉換至 rbenv</h2>
<p>聽聞 <a href="https://github.com/rbenv/rbenv">rbenv</a> 相較 rvm 來說，是對系統較為乾淨的 ruby 版本管理工具。就趁這次更新開發環境一起重置吧！</p>
<h3 id="%E7%A7%BB%E9%99%A4-rvm"><a class="anchor" href="#%E7%A7%BB%E9%99%A4-rvm"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 移除 rvm</h3>
<p>套件也內建了一鍵移除的方式：</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">rvm implode</td></tr></tbody></table></code></pre>
<p>做完之後也可以將 rvm 剩餘的檔案移掉：</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">rm -rf ~/.rvm</td></tr></tbody></table></code></pre>
<h3 id="%E5%AE%89%E8%A3%9D-rbenv"><a class="anchor" href="#%E5%AE%89%E8%A3%9D-rbenv"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 安裝 rbenv</h3>
<p>參照了<a href="https://github.com/rbenv/rbenv">專案官網</a>的說明，只要把該 repo clone 下來，設置好 <code>PATH</code> 變數，在為 shell 加上一些設定便可以開始安裝 ruby 了。在 OS X 環境又更容易，只要用 Homebrew 一鍵安裝便成。</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">brew install rbenv</td></tr></tbody></table></code></pre>
<p>裝完之後就可以發現 rbenv 已經被裝到 Homebrew 的可執行位置了，可以跑 <code>which</code> 指令檢驗</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">which</span> rbenv</td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-comment"># =&gt; /usr/local/bin/rbenv</span></td></tr></tbody></table></code></pre>
<p>在 Homebrew 安裝跑完之後，安裝腳本會提示已在 shell profile(.zshrc/.profile/.bash_profile) 加上 rbenv 初始化腳本，預設內容如下：</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.rbenv/bin:<span class="hljs-variable">$PATH</span>&quot;</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(rbenv init -)</span>&quot;</span></td></tr></tbody></table></code></pre>
<p>第二行的 <code>rbenv init -</code> 指令輸出，在你一般開啟的 Terminal 會跑出：</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/Users/USERNAME/.rbenv/shims:<span class="hljs-variable">${PATH}</span>&quot;</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-built_in">export</span> RBENV_SHELL=zsh</td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3"><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.zsh&#x27;</span></td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4"><span class="hljs-comment"># ... 下面一串</span></td></tr></tbody></table></code></pre>
<p>不過在 VSCode 內建終端機卻會跑出：</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/usr/local/opt/rbenv/shims:<span class="hljs-variable">${PATH}</span>&quot;</span> <span class="hljs-comment"># 就這行不同</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-built_in">export</span> RBENV_SHELL=zsh</td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3"></td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4"><span class="hljs-comment"># ... 下面一樣</span></td></tr></tbody></table></code></pre>
<p>大概是執行權限不同的關係吧，rbenv 執行的位置不同也會讓 <code>gem</code>/<code>bundler</code> 裝到不同的位置，為了方便起見，一律設成一般終端機跑出來的那串。把下面這串貼到 <code>~/.zshrc</code> 最下面就是。</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/Users/USERNAME/.rbenv/shims:<span class="hljs-variable">${PATH}</span>&quot;</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-built_in">export</span> RBENV_SHELL=zsh</td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3"><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.zsh&#x27;</span></td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4"><span class="hljs-built_in">command</span> rbenv <span class="hljs-built_in">rehash</span> 2&gt;/dev/null</td></tr><tr><td class="hljs-line-number" data-line-number=5></td><td class="hljs-line" id="LC5"><span class="hljs-function"><span class="hljs-title">rbenv</span></span>() {</td></tr><tr><td class="hljs-line-number" data-line-number=6></td><td class="hljs-line" id="LC6">  <span class="hljs-built_in">local</span> <span class="hljs-built_in">command</span></td></tr><tr><td class="hljs-line-number" data-line-number=7></td><td class="hljs-line" id="LC7">  <span class="hljs-built_in">command</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span></td></tr><tr><td class="hljs-line-number" data-line-number=8></td><td class="hljs-line" id="LC8">  <span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$#</span>&quot;</span> -gt 0 ]; <span class="hljs-keyword">then</span></td></tr><tr><td class="hljs-line-number" data-line-number=9></td><td class="hljs-line" id="LC9">    <span class="hljs-built_in">shift</span></td></tr><tr><td class="hljs-line-number" data-line-number=10></td><td class="hljs-line" id="LC10">  <span class="hljs-keyword">fi</span></td></tr><tr><td class="hljs-line-number" data-line-number=11></td><td class="hljs-line" id="LC11"></td></tr><tr><td class="hljs-line-number" data-line-number=12></td><td class="hljs-line" id="LC12">  <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$command</span>&quot;</span> <span class="hljs-keyword">in</span></td></tr><tr><td class="hljs-line-number" data-line-number=13></td><td class="hljs-line" id="LC13">  <span class="hljs-built_in">rehash</span>|shell)</td></tr><tr><td class="hljs-line-number" data-line-number=14></td><td class="hljs-line" id="LC14">    <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(rbenv <span class="hljs-string">&quot;sh-<span class="hljs-variable">$command</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>)</span>&quot;</span>;;</td></tr><tr><td class="hljs-line-number" data-line-number=15></td><td class="hljs-line" id="LC15">  *)</td></tr><tr><td class="hljs-line-number" data-line-number=16></td><td class="hljs-line" id="LC16">    <span class="hljs-built_in">command</span> rbenv <span class="hljs-string">&quot;<span class="hljs-variable">$command</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>;;</td></tr><tr><td class="hljs-line-number" data-line-number=17></td><td class="hljs-line" id="LC17">  <span class="hljs-keyword">esac</span></td></tr><tr><td class="hljs-line-number" data-line-number=18></td><td class="hljs-line" id="LC18">}</td></tr></tbody></table></code></pre>
<p>若是 fish 就貼下面這個：</p>
<pre><code><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">setenv PATH '/Users/USERNAME/.rbenv/shims' $PATH</td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2">setenv RBENV_SHELL fish</td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3">. '/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.fish'</td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4">command rbenv rehash 2>/dev/null</td></tr><tr><td class="hljs-line-number" data-line-number=5></td><td class="hljs-line" id="LC5">function rbenv</td></tr><tr><td class="hljs-line-number" data-line-number=6></td><td class="hljs-line" id="LC6">  set command $argv[1]</td></tr><tr><td class="hljs-line-number" data-line-number=7></td><td class="hljs-line" id="LC7">  set -e argv[1]</td></tr><tr><td class="hljs-line-number" data-line-number=8></td><td class="hljs-line" id="LC8"></td></tr><tr><td class="hljs-line-number" data-line-number=9></td><td class="hljs-line" id="LC9">  switch "$command"</td></tr><tr><td class="hljs-line-number" data-line-number=10></td><td class="hljs-line" id="LC10">  case rehash shell</td></tr><tr><td class="hljs-line-number" data-line-number=11></td><td class="hljs-line" id="LC11">    . (rbenv "sh-$command" $argv|psub)</td></tr><tr><td class="hljs-line-number" data-line-number=12></td><td class="hljs-line" id="LC12">  case '*'</td></tr><tr><td class="hljs-line-number" data-line-number=13></td><td class="hljs-line" id="LC13">    command rbenv "$command" $argv</td></tr><tr><td class="hljs-line-number" data-line-number=14></td><td class="hljs-line" id="LC14">  end</td></tr><tr><td class="hljs-line-number" data-line-number=15></td><td class="hljs-line" id="LC15">end</td></tr></tbody></table></code></pre>
<h3 id="%E8%A3%9D-ruby"><a class="anchor" href="#%E8%A3%9D-ruby"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 裝 ruby</h3>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">rbenv install 2.3.1</td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2">rbenv global 2.3.1</td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3">gem install bundler</td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4"></td></tr><tr><td class="hljs-line-number" data-line-number=5></td><td class="hljs-line" id="LC5">bundle install</td></tr></tbody></table></code></pre>
<p>搞定！</p>
<h3 id="pow-%E7%9A%84%E9%A1%8D%E5%A4%96%E8%A8%AD%E5%AE%9A"><a class="anchor" href="#pow-%E7%9A%84%E9%A1%8D%E5%A4%96%E8%A8%AD%E5%AE%9A"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> Pow 的額外設定</h3>
<p>其實在 Pow 的 <a href="https://github.com/basecamp/pow/wiki/Troubleshooting">wiki</a> 就有解答，不過因為我又對 rbenv 做了 PATH 的改動，所以設定也不太一樣。</p>
<p>打開 ~/.powconfig 並貼入</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/Users/USERNAME/.rbenv/shims:/Users/USERNAME/.rbenv/shims/bin:<span class="hljs-variable">$PATH</span>&quot;</span></td></tr></tbody></table></code></pre>
<p>然後重啟 pow service</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="far fa-clipboard"></i><i class="fas fa-check"></i></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">touch ~/.pow/restart.txt</td></tr></tbody></table></code></pre>
<h2 id="%E5%B0%87%E4%B8%BB%E8%A6%81-shell-%E7%94%B1-zsh-%E6%8F%9B%E6%88%90-fish"><a class="anchor" href="#%E5%B0%87%E4%B8%BB%E8%A6%81-shell-%E7%94%B1-zsh-%E6%8F%9B%E6%88%90-fish"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 將主要 shell 由 zsh 換成 fish</h2>
<p>zsh 有著非常有名的 <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> 設定檔管理框架，fish 底下也有個好用的叫 <a href="https://github.com/fisherman/fisherman">fisherman</a>。不過我終究是沒有把系統預設的 shell 換掉(<code>chsh</code> 指令)，因為挺多工具與 fish 不相容。</p>
<p>fish 啟動速度飛快，帶我重回還沒有裝一堆 zsh 套件的美好往日時光。</p>
<h3 id="vscode"><a class="anchor" href="#vscode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> VSCode</h3>
<p>講來講去這篇好像跟 VSCode 沒啥關係耶？那就附張截圖好了，VSCode 也是十分優秀的 Markdown 編輯器，內建了快速的 Preview，碼 code、寫文件、Terminal、Task Runner 全都內建了，還夠輕量快速，Extension 也陸續多了起來，還真不好挑剔啊 XD。</p>
<figure data-type="image"><img src="https://lh3.googleusercontent.com/-o17HvZ1w7k6NzK0kw84uJNdhTmnWCH1hGyHduSokRnhgdeoaIh8reqDVrlAc43uGIN9K5KZYpujZuuSdqrV5BiuBhYNsQlubHEfAPut1pGvbkYzw3zKLfuEpphlj7JpBKj9x3m-Zk-rA4s-xFXnagC3vO8otXWOAH7qXYg47kx8D1qHVDpwHjD4WW8yd1jV_CYZlL5VWfrbbiVAdlwBDalB_UexT8emkhqTMjNwQMhIwMyqEXk8LcsfuI5IqgpdR488KovW9Z3ckMJjMbMWSpYOUfMuJ4_pRgYPMla9cm-h6QcP5PXIyhfTERUTRUyUAawcJAWC74R519UVe_gLizh0RqvKazWU0ISCjXVOmbH_bljBAwRIBZobMme9W3deBztAMd0asjKFJnjsviDKDgb1n5y8wS6z5nfNGWijNJbl2JwpVv9EVStbGM4OoqM-9st2MO5oVZJEK8PgtNp1LvuBr3Qkch_k2RXnSZJTfxs4aYZroTJTplZI2XEZS8bkK6Xlczod9rFAvsBdSK2G1A3rixmyBrTOkb7YE7Z8E5NRGWXx3mJns607eu00e69bzGlSe7kc_IpwN1wiYUtqWuRjABPqIhsV=w1046-h781-no" alt=""></figure>
</article></main></div><div class="container py-3 px-3" style="max-width:630px"><div class="container-block color-bg-info color-border-info rounded-2 p-3">本篇文章驕傲的使用 <a class="no-underline color-text-primary text-semibold" href="https://hackmd.io" target="_blank"><i class="fas fa-file-alt"></i> HackMD</a> <a target="_blank" href="https://hackmd.io/s/Q1WmHFH8QL-6eiLkfOX8eg">發佈</a></div></div><div class="container py-3 px-3"><div shortname="dailyoops" config="[object Object]" darkmode="false" id="disqus_thread"></div></div></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\n# rbenv、fish 與 VSCode 設置之路\n\n在最新的 VSCode 1.3.1 版裡，Integrated Terminal 變得更加好用，但由於上游套件 `xterm.js` 的緣故，`zsh` 還是有無法捲動的問題。不過作為一個 Rails 開發者，VSCode 已經是個足夠好用的、足矣媲美 Sublime Text 的編輯器了。為了能夠在 VSCode 開發 Rails，特別對目前的開發環境做出調整。\n\n## 由 RVM 轉換至 rbenv\n\n聽聞 [rbenv][rbenv] 相較 rvm 來說，是對系統較為乾淨的 ruby 版本管理工具。就趁這次更新開發環境一起重置吧！\n\n### 移除 rvm\n\n套件也內建了一鍵移除的方式：\n\n```bash\nrvm implode\n```\n\n做完之後也可以將 rvm 剩餘的檔案移掉：\n\n```bash\nrm -rf ~/.rvm\n```\n\n### 安裝 rbenv\n\n參照了[專案官網][rbenv]的說明，只要把該 repo clone 下來，設置好 `PATH` 變數，在為 shell 加上一些設定便可以開始安裝 ruby 了。在 OS X 環境又更容易，只要用 Homebrew 一鍵安裝便成。\n\n```bash\nbrew install rbenv\n```\n\n裝完之後就可以發現 rbenv 已經被裝到 Homebrew 的可執行位置了，可以跑 `which` 指令檢驗\n\n```bash\nwhich rbenv\n# =\u003e /usr/local/bin/rbenv\n```\n\n在 Homebrew 安裝跑完之後，安裝腳本會提示已在 shell profile(.zshrc/.profile/.bash_profile) 加上 rbenv 初始化腳本，預設內容如下：\n\n```bash\nexport PATH=\"$HOME/.rbenv/bin:$PATH\"\neval \"$(rbenv init -)\"\n```\n\n第二行的 `rbenv init -` 指令輸出，在你一般開啟的 Terminal 會跑出：\n\n```bash\nexport PATH=\"/Users/USERNAME/.rbenv/shims:${PATH}\"\nexport RBENV_SHELL=zsh\nsource '/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.zsh'\n# ... 下面一串\n```\n\n不過在 VSCode 內建終端機卻會跑出：\n\n```bash\nexport PATH=\"/usr/local/opt/rbenv/shims:${PATH}\" # 就這行不同\nexport RBENV_SHELL=zsh\n\n# ... 下面一樣\n```\n\n大概是執行權限不同的關係吧，rbenv 執行的位置不同也會讓 `gem`/`bundler` 裝到不同的位置，為了方便起見，一律設成一般終端機跑出來的那串。把下面這串貼到 `~/.zshrc` 最下面就是。\n\n```bash\nexport PATH=\"/Users/USERNAME/.rbenv/shims:${PATH}\"\nexport RBENV_SHELL=zsh\nsource '/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.zsh'\ncommand rbenv rehash 2\u003e/dev/null\nrbenv() {\n  local command\n  command=\"$1\"\n  if [ \"$#\" -gt 0 ]; then\n    shift\n  fi\n\n  case \"$command\" in\n  rehash|shell)\n    eval \"$(rbenv \"sh-$command\" \"$@\")\";;\n  *)\n    command rbenv \"$command\" \"$@\";;\n  esac\n}\n```\n\n若是 fish 就貼下面這個：\n\n```\nsetenv PATH '/Users/USERNAME/.rbenv/shims' $PATH\nsetenv RBENV_SHELL fish\n. '/usr/local/Cellar/rbenv/1.0.0/libexec/../completions/rbenv.fish'\ncommand rbenv rehash 2\u003e/dev/null\nfunction rbenv\n  set command $argv[1]\n  set -e argv[1]\n\n  switch \"$command\"\n  case rehash shell\n    . (rbenv \"sh-$command\" $argv|psub)\n  case '*'\n    command rbenv \"$command\" $argv\n  end\nend\n```\n\n### 裝 ruby\n\n```bash\nrbenv install 2.3.1\nrbenv global 2.3.1\ngem install bundler\n\nbundle install\n```\n\n搞定！\n\n### Pow 的額外設定\n\n其實在 Pow 的 [wiki](https://github.com/basecamp/pow/wiki/Troubleshooting) 就有解答，不過因為我又對 rbenv 做了 PATH 的改動，所以設定也不太一樣。\n\n打開 ~/.powconfig 並貼入\n\n```bash\nexport PATH=\"/Users/USERNAME/.rbenv/shims:/Users/USERNAME/.rbenv/shims/bin:$PATH\"\n```\n\n然後重啟 pow service\n\n```bash\ntouch ~/.pow/restart.txt\n```\n\n## 將主要 shell 由 zsh 換成 fish\n\nzsh 有著非常有名的 [oh-my-zsh][oh-my-zsh] 設定檔管理框架，fish 底下也有個好用的叫 [fisherman][fisherman]。不過我終究是沒有把系統預設的 shell 換掉(`chsh` 指令)，因為挺多工具與 fish 不相容。\n\nfish 啟動速度飛快，帶我重回還沒有裝一堆 zsh 套件的美好往日時光。\n\n### VSCode\n\n講來講去這篇好像跟 VSCode 沒啥關係耶？那就附張截圖好了，VSCode 也是十分優秀的 Markdown 編輯器，內建了快速的 Preview，碼 code、寫文件、Terminal、Task Runner 全都內建了，還夠輕量快速，Extension 也陸續多了起來，還真不好挑剔啊 XD。\n\n![][screenshot1]\n\n\n[rbenv]: https://github.com/rbenv/rbenv\n[oh-my-zsh]: https://github.com/robbyrussell/oh-my-zsh\n[fisherman]: https://github.com/fisherman/fisherman\n[screenshot1]: https://lh3.googleusercontent.com/-o17HvZ1w7k6NzK0kw84uJNdhTmnWCH1hGyHduSokRnhgdeoaIh8reqDVrlAc43uGIN9K5KZYpujZuuSdqrV5BiuBhYNsQlubHEfAPut1pGvbkYzw3zKLfuEpphlj7JpBKj9x3m-Zk-rA4s-xFXnagC3vO8otXWOAH7qXYg47kx8D1qHVDpwHjD4WW8yd1jV_CYZlL5VWfrbbiVAdlwBDalB_UexT8emkhqTMjNwQMhIwMyqEXk8LcsfuI5IqgpdR488KovW9Z3ckMJjMbMWSpYOUfMuJ4_pRgYPMla9cm-h6QcP5PXIyhfTERUTRUyUAawcJAWC74R519UVe_gLizh0RqvKazWU0ISCjXVOmbH_bljBAwRIBZobMme9W3deBztAMd0asjKFJnjsviDKDgb1n5y8wS6z5nfNGWijNJbl2JwpVv9EVStbGM4OoqM-9st2MO5oVZJEK8PgtNp1LvuBr3Qkch_k2RXnSZJTfxs4aYZroTJTplZI2XEZS8bkK6Xlczod9rFAvsBdSK2G1A3rixmyBrTOkb7YE7Z8E5NRGWXx3mJns607eu00e69bzGlSe7kc_IpwN1wiYUtqWuRjABPqIhsV=w1046-h781-no\n","title":"rbenv、fish 與 VSCode 設置之路","params":{"year":"2016","month":"07","day":"22","slug":"rbenv-fish-and-vscode"},"disqus":{"shortname":"dailyoops","domain":"yukaii.tw"},"noteId":"Q1WmHFH8QL-6eiLkfOX8eg"},"__N_SSG":true},"page":"/blog/[year]/[month]/[day]/[slug]","query":{"year":"2016","month":"07","day":"22","slug":"rbenv-fish-and-vscode"},"buildId":"V89BQpGkcH8WZGRmrgFjv","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-83a824382febe0b0aadd.js" async=""></script><script src="/_next/static/chunks/framework-314ffb4aa8331ecb00c4.js" async=""></script><script src="/_next/static/chunks/commons-d39e816c6c9de90edb11.js" async=""></script><script src="/_next/static/chunks/main-ae36ed1b7923ac63ac40.js" async=""></script><script src="/_next/static/chunks/dbf3ce33-4a20f4b6b57bb34f60e1.js" async=""></script><script src="/_next/static/chunks/05062569-55a0cb2864251f3dec25.js" async=""></script><script src="/_next/static/chunks/pages/_app-d190e9e46e32e72c053d.js" async=""></script><script src="/_next/static/chunks/0e226fb0-a76c2858a8908944605d.js" async=""></script><script src="/_next/static/chunks/9f96d65d-50ca92f005f840760b44.js" async=""></script><script src="/_next/static/chunks/747-ee23ba3d0122c65eba4d.js" async=""></script><script src="/_next/static/chunks/946-c91ab9ec541a82c2814b.js" async=""></script><script src="/_next/static/chunks/962-737bc27569f7e8444c13.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bslug%5D-269495568abb97d3c563.js" async=""></script><script src="/_next/static/V89BQpGkcH8WZGRmrgFjv/_buildManifest.js" async=""></script><script src="/_next/static/V89BQpGkcH8WZGRmrgFjv/_ssgManifest.js" async=""></script></body></html>