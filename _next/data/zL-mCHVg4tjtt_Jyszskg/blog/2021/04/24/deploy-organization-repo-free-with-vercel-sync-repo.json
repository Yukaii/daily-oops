{"pageProps":{"content":"# æˆ‘å°±å…è²»ä»”ï¼šåŒæ­¥ GitHub çµ„ç¹”çš„å„²å­˜åº«åˆ°å€‹äººå¸³è™Ÿï¼Œé”æˆ Vercel çš„å…è²»éƒ¨å±¬\n\nå…è²»ä»”ç³»åˆ—æ–‡ã€‚é–‹ç™¼å°å°ˆæ¡ˆæƒ³ç”¨ SaSS æœå‹™ä½†åˆä¸æƒ³èŠ±éŒ¢å—ï¼Ÿé‚£é€™å€‹ç³»åˆ—æ–‡ä¸€å®šè¦è®€è®€ï¼Œä¸éæˆ–è¨±å…éŒ¢çš„æœ€è²´å‘¢ ğŸ˜‚\n\n## Vercel & Next.js\n\n[Next.js](https://nextjs.org/) é€™å¥—æ¡†æ¶è®“ä½ å¿«é€Ÿå»ºæ§‹ React.js çš„å‰ç«¯ç¶²ç«™ï¼Œç”šè‡³åŒ…å«ç°¡å–®çš„å¾Œç«¯æ•´åˆï¼ŒSSRã€SSG ç­‰å„é …æŠ€è¡“ä¹Ÿéƒ½å¹«ä½ æ•´åˆå¥½äº†ã€‚é–‹ç™¼ Next.js çš„å…¬å¸å°±æ˜¯ [Vercel](https://vercel.com/about)ï¼Œä»–å€‘çš„åŒåæœå‹™ [Vercel](https://vercel.com/) å°±æ˜¯å¹«ä½ æ¶è¨­ Next.js ç¶²ç«™çš„æœ€ä½³é¸æ“‡ã€‚\n\nVercel æä¾›å€‹äººå…è²»ç‰ˆï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦éƒ¨å±¬ GitHub çµ„ç¹”çš„å°ˆæ¡ˆå°±ä¸€å®šå¾—ä»˜éŒ¢ï¼š\n\n![](https://i.imgur.com/V4PMopz.png)\n\nä½†æœ‰æ™‚å°ˆæ¡ˆä¸€å¤šï¼Œå‹¢å¿…è¦é€é GitHub çµ„ç¹”ä¾†ç®¡ç†å°ˆæ¡ˆï¼Œä½ åˆæƒ³å…è²»ä½¿ç”¨ Vercel æ™‚è©²æ€éº¼åšå‘¢ï¼Ÿ\n\n## ç›´è¦ºï¼šåŒæ­¥åˆ° GitHub å€‹äººå„²å­˜åº«\n\nå¾ˆç°¡å–®ï¼ŒFork ä¸€ä»½ç¨‹å¼ç¢¼å„²å­˜åº«åˆ°å€‹äººå¸³è™Ÿå°±å¯ä»¥äº†ï¼Œç„¶å¾Œç”¨ git æ–°å¢ä¸€å€‹ remoteï¼ŒæŠŠç¨‹å¼ç¢¼æ¨ä¸Šå»ï¼š\n\n```bash\ngit remote add personal git@github.com/Yukaii/my-personal-repo\ngit push personal main\n```\n\nä½†æ¯æ¬¡éƒ¨å±¬éƒ½è¦æ‰‹å‹•æ¨ä¸€æ¬¡åˆ°ä¸åŒ remoteï¼Œå¥½éº»ç…©å‘€ï¼Œæˆ‘æƒ³è¦è‡ªå‹•åŒ–ï¼\n\n## ç”¨ GitHub Actions ä¾†è‡ªå‹•åŒ–\n\nGitHub Actions æ˜¯ GitHub å…§å»ºçš„ CI/CD å·¥å…·ï¼Œ~~å¸¸å¸¸è¢«äººæ‹¿ä¾†æŒ–ç¤¦~~ã€‚æˆ‘å€‘å»ºç«‹ä¸€å€‹ç¨ç«‹çš„ç¨‹å¼ç¢¼å„²å­˜åº«ä¾†ç®¡ç†åŒæ­¥ Actions è¨­å®šæª”ã€‚æˆ‘è‡ªå·±çš„å« `repo-syncer` (github.com/Yukaii/repo-syncer)ï¼Œæ˜¯ç§æœ‰çš„æ‰€ä»¥å„ä½çœ‹ä¸åˆ°ï¼Œä»¥ä¸‹ç¨±ç‚ºã€ŒåŒæ­¥ç®¡ç†å„²å­˜åº«ã€ã€‚\n\n**`.github/workflows/sync-repo1.yml`**\n\n```yaml= [3,16,18,20]\non:\n  schedule:\n  - cron:  \"*/60 * * * *\"\n  workflow_dispatch:\n\njobs:\n  repo-sync:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v2\n      with:\n        persist-credentials: false\n    - name: git-sync\n      uses: wei/git-sync@v3\n      with:\n        source_repo: \"git@github.com:GitHubOrg/repo.git\"\n        source_branch: \"refs/remotes/source/*\"\n        destination_repo: \"Yukaii/my-repo\"\n        destination_branch: \"refs/heads/*\"\n        ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }}\n```\n\nå¼·èª¿å¹¾è¡Œåšèªªæ˜ï¼š\n\n- `3`: å®šæ™‚æ¯å€‹å°æ™‚è·‘ä¸€æ¬¡ï¼Œé›–ç„¶æ˜¯å…è²»ä»”ä½†ä¹Ÿä¸è¦å¤ªé »ç¹çš„åˆ©ç”¨è³‡æºã€‚å¯«çš„æ˜¯ Cron èªæ³•ï¼Œå¯ä»¥åˆ©ç”¨ [crontab guru](https://crontab.guru/) é€™å€‹å·¥å…·ä¾†è¼”åŠ©ï¼ŒGitHub Actions çš„ç·¨è¼¯å™¨ä¹Ÿæœƒæç¤ºä½ ã€‚\n- `16`: è¨˜å¾—æ”¹æˆ GitHub çµ„ç¹”å…§å„²å­˜åº«çš„é€£çµ\n- `18`: è¨˜å¾—æ”¹æˆå€‹äººå¸³è™Ÿå„²å­˜åº«çš„é€£çµ\n- `20`: åˆ°ã€ŒåŒæ­¥ç®¡ç†å„²å­˜åº«ã€çš„è¨­å®šé é¢åŠ å…¥ Secretï¼Œé€™è£¡å¡«çš„æ˜¯ç§é‘°ã€‚å»ºè­°å¯ä»¥ [ç”¢ç”Ÿä¸€çµ„æ–°çš„ SSH é‡‘é‘°](https://docs.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent) æ–¹ä¾¿ç®¡ç†ã€‚è¨˜å¾—åŠ åˆ°å¸³è™Ÿçš„ SSH é‡‘é‘°åˆ—è¡¨è£¡é ­ã€‚\n\n## å°±é€™æ¨£äº†\n\n![](https://i.imgur.com/km7anw5.png =300x)\n\nVercel ç¶å®šç­‰ç­‰ä¸åœ¨æœ¬ç¯‡è¨è«–ç¯„åœï¼Œå°±ä¸å¯«äº†ã€‚è¨­å®šå®Œæˆå¾Œå¯ä»¥åˆ° GitHub Actions çš„åˆ†é æ‰‹å‹•è§¸ç™¼ Actionï¼Œçœ‹çœ‹ç¨‹å¼ç¢¼æ˜¯å¦æˆåŠŸåŒæ­¥ã€‚ï¼ˆé»ä¸Šåœ–é‚£å€‹ `Run workflow`ï¼‰\n\nGitHub Actions æ¨¡çµ„çš„è¨­å®šæª”è®“æˆ‘å€‘å¯ä»¥å¿«é€Ÿå¾©ç”¨åˆ¥äººå¯«å¥½çš„ Actionsï¼Œæˆ‘é€™æ¬¡ç”¨çš„ Actions æ˜¯ [`wei/git-sync`](https://github.com/wei/git-sync)ï¼Œå¯ä»¥çœ‹åˆ°æ•´ä»½è¨­å®šæª”æ ¹æœ¬æ²’æ”¹å¹¾è¡Œï¼Œè¼•è¼•é¬†é¬†å•Šï¼\n\n> ~~å¦‚æœå°ã€Œæˆ‘å°±å…è²»ä»”ã€ç³»åˆ—æ–‡æœ‰èˆˆè¶£ï¼Œè¨˜å¾—è¨‚é–±æŒ‰è®šä¸¦é–‹å•Ÿå°éˆ´éºï¼Œæµªæ¼« Duke å°±æœƒå¸¶ä½ æ‰¾åˆ°å±¬æ–¼ä½ çš„æµªæ¼«~~","title":"æˆ‘å°±å…è²»ä»”ï¼šåŒæ­¥ GitHub çµ„ç¹”çš„å„²å­˜åº«åˆ°å€‹äººå¸³è™Ÿï¼Œé”æˆ Vercel çš„å…è²»éƒ¨å±¬","params":{"year":"2021","month":"04","day":"24","slug":"deploy-organization-repo-free-with-vercel-sync-repo"},"disqus":{"shortname":"dailyoops","domain":"yukaii.tw"}},"__N_SSG":true}