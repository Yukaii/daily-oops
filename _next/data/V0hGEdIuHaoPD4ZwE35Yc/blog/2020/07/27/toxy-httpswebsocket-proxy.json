{"pageProps":{"content":"# 用 toxy 架設可程式化模擬各種網路情況的 http/s、websocket proxy\n\n###### tags: `draft`\n\n```bash\nnpm install toxy\n```\n\n```javascript\nconst toxy = require('toxy')\n\nconst proxy = toxy()\nconst rules = toxy.rules\nconst poisons = toxy.poisons\n\nproxy\n  .forward('http://localhost:3000')\n\nproxy\n  .get('/build/MathJax/*')\n  .poison(poisons.slowOpen({ delay: 3 * 1000 }))\n  .poison(poisons.timeout(5000))\n  .withRule(rules.probability(50))\n\nproxy\n  .get('/*/download')\n  .poison(poisons.slowOpen({ delay: 2 * 1000 }))\n\nproxy\n  .all('/*')\n\nproxy\n  .protocol('ws')\n  .forward('ws://localhost:3000')\n\nproxy.listen(4000)\nconsole.log('Proxy server started')\n```\n\n## Alternatives\n\n- clumsy\n- network link conditioner\n","title":"用 toxy 架設可程式化模擬各種網路情況的 http/s、websocket proxy"},"__N_SSG":true}