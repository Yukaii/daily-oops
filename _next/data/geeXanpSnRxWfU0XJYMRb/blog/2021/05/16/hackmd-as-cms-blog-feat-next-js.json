{"pageProps":{"content":"\n# æŠŠ HackMD ç•¶åšéƒ¨è½æ ¼å¾Œè‡º feat. Next.js\n\n:::success\næ²’ä»€éº¼ä¸»é¡Œèƒ½å¯«çš„æ™‚å€™ï¼Œæ›´æ–°ä¸€ä¸‹éƒ¨è½æ ¼ç‰ˆå‹æº–æ²’éŒ¯\n\n\\- [æˆ‘ï¼Œ2017](https://yukai.dev/blog/2017/03/29/new-primer-css-github-theme)\n:::\n\nå°±æ˜¯é€™å¥è©±è®“æˆ‘ç¾åœ¨åˆä¾†ç™¼æ–‡ XDã€‚\n\næ™‚é–“éå¾—é£›å¿«ï¼Œè·é›¢ä¸Šæ¬¡æ›´æ–°ä¹Ÿéäº†ä¸‰å¹´å¤šï¼Œä½†éƒ¨è½æ ¼æ–‡ç« ä¹Ÿæ²’å¤šå¯«å¹¾ç¯‡ã€‚è€å¯¦èªªä¹Ÿä¸æ˜¯æ²’æœ‰å¯«ï¼Œä½†ä¸æ˜¯æ”¾åœ¨ç§äººçš„ Evernoteï¼Œå°±æ˜¯æ•£è½åœ¨ [HackMD](https://hackmd.io/@yukai) ä¸Šçš„ç¨‹å¼ç¢¼ç‰‡æ®µå’ŒæŒ‡ä»¤æ“ä½œè¨˜éŒ„ï¼Œè¦ç›´æ¥è²¼å‡ºä¾†é‚„æ˜¯æœ‰äº›ç¾æ¥çš„ã€‚\n\nå»å¹´åæœˆï¼Œçªç„¶è¦ºå¾—[èˆŠéƒ¨è½æ ¼](https://yukaii.tw)ç‰ˆå‹å¯¦åœ¨ç”¨å¤ªä¹…äº†ï¼Œé€Ÿåº¦ä¹Ÿæœ‰é»æ…¢ã€è¨­è¨ˆæœ‰é»éæ™‚ã€‚ç™¼æ–°æ–‡ç« æ™‚ï¼Œé‚„å¾—åœ¨ HackMD ä¸Šå¯«å®Œæ–‡ç« ã€åœ¨ GitHub Repo å»ºæ–°æª”æ¡ˆã€å†è²¼å…§å®¹éå»ã€‚è‹¥èƒ½æ‰“é€ ä¸€å€‹æ›´æµæš¢æ„‰å¿«çš„å·¥ä½œæµç¨‹ï¼Œé‚£æˆ‘çš„æ–‡ç« ç”¢é‡ä¸€å®šèƒ½æ›´é«˜å•Šï¼~~ï¼ˆä¸è¦çæ°å¥½å—ï¼‰~~\n\n## æ”¹ç‰ˆè¨ˆåŠƒ\n\né€™æ¬¡çš„éƒ¨è½æ ¼æ”¹ç‰ˆæœ‰å¹¾å€‹éœ€æ±‚ï¼š\n\n1. **é€Ÿåº¦**ã€‚åŸæœ¬èˆŠçš„éƒ¨è½æ ¼æ˜¯ç”¨ [Jekyll æ¶è¨­](https://github.com/Yukaii/yukaii.github.io/)ï¼Œç´”éœæ…‹çš„ç¶²é ï¼Œæ›é ä¹Ÿä½¿ç”¨äº† [Turbolinks](https://github.com/turbolinks/turbolinks) é€™å€‹ Pjax æŠ€è¡“åŠ é€Ÿï¼Œç„¡è«–æ˜¯è¼‰å…¥æ™‚é–“ä»¥åŠæ›é éƒ½ååˆ†é †æš¢ã€‚æ–°çš„éƒ¨è½æ ¼ç³»çµ±å¸Œæœ›èƒ½é”åˆ°åŒæ¨£çš„é€Ÿåº¦ï¼Œç”šè‡³åœ¨é€™ä¹‹ä¸Šã€‚\n2. **æ§‹å»ºçš„æ˜“ç”¨æ€§**ã€‚åŸæœ¬çš„éƒ¨è½æ ¼ä½¿ç”¨åŸç”Ÿçš„ GitHub Pagesï¼Œå¦å¤–æ‹†å‡ºæˆ [octoflavor](https://github.com/Yukaii/octoflavor) Jekyll ä¸»é¡Œã€‚è§£é‡‹ä¸€ä¸‹ã€ŒåŸç”Ÿã€å’Œã€ŒéåŸç”Ÿã€GitHub Pages çš„å·®åˆ¥ï¼š\n    - **åŸç”Ÿ**çš„ GitHub Pages å°±æ˜¯ GitHub å¹«ä½ è·‘ Jekyll buildï¼Œä½ åªè¦æ¨ä¸Š markdown å°±å¥½äº†ï¼Œä¹Ÿä¸ç”¨ç¶ä»€éº¼ CI æœå‹™\n    - **éåŸç”Ÿ**çš„ GitHub Pagesï¼Œå°±æ˜¯æŠŠç¶²é çš„åŸå§‹ç¢¼ä¸Šå‚³åˆ° `gh-pages` åˆ†æ”¯ï¼Œå‰©ä¸‹ä¾†çš„ GitHub å¹«ä½ æå®šã€‚\n4. **Node.js æ´¾**ã€‚æˆ‘åªæƒ³ npm è£å¥½è£æ»¿ã€‚\n5. **è‰¯å¥½çš„é–‹ç™¼é«”é©—**ã€‚å¦‚ä½•æ–¹ä¾¿çš„å¹«éƒ¨è½æ ¼æ“´å……ä¹Ÿæ˜¯é‡è¦çš„ä¸€ç’°ã€‚Jekyll å›ºç„¶ä¸éŒ¯ï¼Œä½†æ˜¯è€èˆŠçš„ Liquid æ¨£æ¿èªæ³•ï¼Œå’Œæ²’æœ‰å…§å»ºç¾ä»£å‰ç«¯å¥—ä»¶ç®¡ç†å°±è¼¸äº†ä¸€å¤§æˆªã€‚\n6. **åœ¨ HackMD ä¸Šå¯«ä½œ**ã€‚æ¥­é… GOODï¼\n\nè‡³æ–¼æˆ‘è¦å¦‚ä½•é”æˆé€™å¹¾é …éœ€æ±‚å‘¢ï¼Ÿå…ˆè®“æˆ‘å€‘é€²å…¥é é…çš„ç’°ç¯€å§ ğŸ¤©\n\n## HackMD çš„åœ˜éšŠæ–‡ç« åˆ—è¡¨ API\n\n![HackMD Public Team - DailyOops](https://i.imgur.com/QjF4EIL.png \"HackMD åœ˜éšŠ - Daily Oops!ï¼Œå­˜æ”¾æ–‡ç« çš„åœ°æ–¹\")\n\nHackMD æœ‰ä¸€å€‹éå…¬é–‹çš„ APIï¼š`GET https://hackmd.io/api/@TEAM_PATH/overview`ï¼Œå›å‚³å…¬é–‹é ä¸‹æ‰€æœ‰èƒ½è¦‹çš„ç­†è¨˜ã€‚ä»¥æˆ‘çš„éƒ¨è½æ ¼çš„åœ˜éšŠ [@DailyOops](https://hackmd.io/@DailyOops) ç‚ºä¾‹ï¼š\n\n```javascript\nGET https://hackmd.io/api/@dailyOops/overview\n\n{\n  \"team\": ...,\n  \"notes\": [\n    {\n      \"id\": ....,\n      \"content\": \"...\",\n      \"title\": \"...\",\n      ...\n    }\n  ]\n}\n```\n\næœ‰äº†é€™äº›è³‡æ–™ï¼Œå°±å¯ä»¥ç¹¼çºŒæˆ‘çš„éƒ¨è½æ ¼æ”¹ç‰ˆè¨ˆåŠƒå•¦ï¼\n\n## éš†é‡ä»‹ç´¹ï¼šDaily Oops 2.0 feat. Next.js\n\næˆ‘é¸æ“‡ [Next.js](https://nextjs.org/) ä½œç‚ºé€™æ¬¡éƒ¨è½æ ¼æ”¹ç‰ˆçš„ä¸»è¦æŠ€è¡“ï¼Œæœ€å¤§çš„åŸå› å°±æ˜¯é›–ç„¶å®ƒæ˜¯ React.js æ¡†æ¶ï¼Œä½†å…§å»ºã€Œéœæ…‹ç¶²ç«™ç”¢ç”Ÿã€åŠŸèƒ½ (ç°¡ç¨± **SSG**, Static-site generation)ã€‚\n\nSSG ä¿æœ‰å‹•æ…‹è³‡æ–™çš„å½ˆæ€§ï¼Œä»¥åŠéœæ…‹ç¶²ç«™çš„ç°¡æ½”èˆ‡é€Ÿåº¦ã€‚ä½ å¯ä»¥é€é API å–å¾—çš„å‹•æ…‹è³‡æ–™ï¼Œä¾†ç”¢ç”Ÿå¤šå€‹éœæ…‹é é¢ï¼Œè€Œä¸”æ˜¯ã€Œé å…ˆæ¸²æŸ“ã€å¥½çš„éœæ…‹ HTML ç¶²é ï¼Œä¸æœƒæœ‰ Cilent side Reactï¼Œè¼‰å…¥å¾Œæ‰æ¸²æŸ“çš„ç¾è±¡ã€‚åœ¨é é¢åˆ‡æ›æ™‚åˆèƒ½ä¿æœ‰ React SPA çš„é †æš¢æ›é ï¼Œæˆ‘å…¨éƒ½è¦ï¼\n\nå°æ–¼éƒ¨è½æ ¼é€™ç¨®æ›´æ–°é »ç‡ç›¸å°ä¸ç”¨å³æ™‚ï¼Œéœæ…‹é é¢å±…å¤šçš„å ´æ™¯ï¼ŒNext.js å¯èªªæ˜¯ç›¸ç•¶é©åˆã€‚æœƒæ¡ç”¨ Next.js çš„å¦ä¸€å€‹åŸå› ï¼Œæ˜¯ç•¶æ™‚çœ‹åˆ°äº† [notion-blog](https://github.com/ijjk/notion-blog) é€™å€‹å°ˆæ¡ˆï¼Œåœ¨ Notion é‚„æ²’æœ‰å…¬é–‹ API çš„ç•¶ä¸‹åè§£å‡º APIï¼ŒæŠŠ Notion ç•¶åš CMS ä¾†ç”¨ï¼ŒåŒæ¨£æ­é…çš„æ˜¯ Next.js çš„ SSG åŠŸèƒ½ã€‚\n\n![](https://hackmd.io/_uploads/HytiiZnu_.png)\n\nä¸Šåœ–å°±æ˜¯æ–°éƒ¨è½æ ¼çš„è³‡æ–™æµï¼š\n\n1. å¾ HackMD æŠ“å–æ–‡ç« è³‡æ–™\n2. äº¤ç”± Next.js å»ºç½®\n3. å®Œæˆéœæ…‹ç¶²ç«™å»ºç½®\n\nç¨‹å¼ç¢¼æ”¾åœ¨ [GitHub](https://github.com/Yukaii/daily-oops)ï¼Œæ¥ä¸‹ä¾†çµ¦å„ä½å¸¶ä¾†å¹¾å€‹å€¼å¾—ä¸€æçš„ç´°ç¯€ã€‚\n\n## `getStaticPaths` å’Œ `getStaticProps` çš„è³‡æ–™ä¸äº’é€š\n\n`getStaticPaths` èƒ½æ‹¿åˆ°ã€Œéœæ…‹ç¶²ç«™é é¢åˆ—è¡¨ã€ï¼Œ`getStaticProps` å‰‡æ˜¯ã€Œéœæ…‹ç¶²ç«™é é¢è³‡æ–™ã€ï¼Œä½†åˆ—è¡¨åƒ…åƒ…æ˜¯åˆ—è¡¨ã€‚æ„Ÿè¦ºé‚„æ˜¯æœ‰é»æŠ½è±¡ï¼Œæˆ‘å¯«æ®µç°¡åŒ–ç‰ˆçš„å¯¦ä½œï¼š\n\n```typescript\nconst pathData = getStaticPaths()\nassert(pathData).deepEqual([\n  { params: { id: '1' }},\n  { params: { id: '2' }},\n])\n// params æœƒç”¨åœ¨ /posts/[id] å‹•æ…‹ç¶²å€çš„åƒæ•¸\n\nasync function getPostData (postUUID: string) {\n  // å•é¡Œï¼šæˆ‘å€‘åªæœ‰ id è€Œæ²’æœ‰ postUUID\n  return fetch(`/api/${postUUID}`)\n \n\n// getStaticProps åªèƒ½æ‹¿åˆ° params ç•¶åšåƒæ•¸\nconst props = getStaticProps({ params: { id: '1' } })\n\nfunction getStaticProps (params) {\n  getPostData(params.id) // ç„¡æ•ˆ\n}\n\n\n```\n\næœ‰å€‹å•é¡Œæ˜¯ã€Œ**getStaticProps åªèƒ½ç”¨ç¶²å€åƒæ•¸ç•¶åšå‡½å¼åƒæ•¸**ã€ã€‚ä»¥ä¸Šé¢çš„ç¨‹å¼ç¢¼ç‚ºä¾‹ï¼Œå–å¾—æ–‡ç« å…§å®¹çš„å‡½å¼ `getPostData` éœ€è¦æ–‡ç« çš„ UUIDï¼Œä½†æˆ‘å€‘ `getStaticPaths` æƒ³è¦æ‹¿ä¾†ç•¶åšç¶²å€çš„æ˜¯æ•¸å­— IDï¼Œé€™æ¨£å°±æ²’è¾¦æ³•ç›´æ¥åœ¨ `getStaticProps` å‘¼å« API å–å¾—æ–‡ç« è³‡æ–™äº†ã€‚\n\næˆ‘å¿ƒç›®ä¸­ç†æƒ³çš„è³‡æ–™æ¶æ§‹æ‡‰è©²æ˜¯é€™æ¨£ï¼š\n\n```javascript\nconst data = getStaticData() // new getStaticPath method\nassert(data).deepEqual([{\n  path: '/slug-1',\n  data: {\n    pageProp1: 'value'\n  }\n}])\n\nconst props = getStaticProps('/slug1')\nassert(props).deepEqual({\n  pageProp1: 'value'\n})\n```\n\n`getStaticData` æ˜¯æ”¹ç‰ˆçš„ `getStaticPath`ï¼Œä½ å¯ä»¥å›å‚³é™¤äº† params ä¹‹å¤–çš„åƒæ•¸ï¼Œè®“ `getStaticProps` å¯ä»¥ç›´æ¥å–ç”¨ã€‚\n\né€™å€‹å•é¡Œåœ¨ Next.js çš„è¨è«–å€ [#11272](https://github.com/vercel/next.js/discussions/11272) æœ‰ç›¸ç•¶å¤šçš„è¨è«–ï¼Œç›®å‰ upvote æœ€é«˜çš„è§£ç­”æ˜¯è‡ªå·±åœ¨ç¡¬ç¢Ÿä¸Šå¿«å–ä¸€ä»½è³‡æ–™ï¼Œåœ¨ `getStaticProps` æ™‚é€éå¿«å–éçš„ API å»æŠ“è³‡æ–™ã€‚æˆ‘ä¹Ÿè‡ªå·±å¯¦ä½œäº†ä¸€ä»½ï¼š [`lib/post.js`](https://github.com/Yukaii/daily-oops/blob/main/lib/post.js)\n\n## è¨­è¨ˆï¼šPrimer è¨­è¨ˆç³»çµ±\n\n| ![](https://hackmd.io/_uploads/BJDq5jCdO.jpg) | ![](https://hackmd.io/_uploads/Bys9qi0u_.jpg) |\n| --------------------------------------------- | --------------------------------------------- |\n| ![](https://hackmd.io/_uploads/B1WOqs0O_.png) | ![](https://hackmd.io/_uploads/HJSFqsA_O.png) |\n\né»æ“Šåœ–ç‰‡å¯çœ‹å¤§åœ–ã€‚\n\nåœ¨è¨­è¨ˆæ–¹é¢ï¼Œç›®å‰é‚„æ˜¯å€‹å·¥ç¨‹å¸«çš„æˆ‘ï¼Œé€™æ¬¡ä¸€æ¨£æ¡ç”¨äº† GitHub çš„è¨­è¨ˆç³»çµ± Primerã€‚Primer è¿‘å¹´ä¾†é€²å±•è¿…é€Ÿï¼Œé‚„å¤šäº†æš—è‰²ä¸»é¡Œçš„è¨­è¨ˆï¼Œ[è‰²å½©ç³»çµ±](https://primer.style/css/support/color-system) é–‹ç®±å³ç”¨ï¼Œä¸ç”¨è‡ªå·±æ…¢æ…¢èª¿è‰²ã€‚\n\n![](https://hackmd.io/_uploads/rkTiioAOd.png \"Primer çš„ Color Systemï¼Œç›´æ¥å¥— class å°±æœ‰æš—è‰²æ•ˆæœå•¦\")\n\n## Site Logo\n\n![](https://hackmd.io/_uploads/H1iqAs0_O.gif \"é€™æ˜¯ä¸€éš»å°è²“ç†Šï¼Œä»–å¾ˆå¯æ„›ï¼Œå¦‚æœä½ æ²’çœ‹éï¼Œç¾åœ¨ä½ çœ‹éäº†\")\n\nLogo ä¹Ÿæ˜¯è‡ªå·±ç•«çš„ï¼ŒGoogle äº†ä¸€å¼µåƒè€ƒåœ–å°±ç›´ä¸Šäº†ï¼Œåæ­£å°è²“ç†Šå“ªå¼µåœ–ç‰‡éƒ½å¾ˆå¯æ„›ï¼Œå°å§ï¼ˆå•¾\n\n![](https://hackmd.io/_uploads/SyWH13Cdu.png \"é™„ä¸Š Figma å·¥ä½œå€\")\n\n![](https://hackmd.io/_uploads/rkwIJhC_O.png \"Gif åœ–ä¹Ÿæ˜¯ç”¨ Figma Plugin - GiffyCanvas åšçš„\")\n\n## Markdown æ¸²æŸ“\n\nå’Œ HackMD/CodiMD ä¸€æ¨£ï¼Œç¹¼çºŒæ¡ç”¨é«˜åº¦å¯æ“´å……ã€ç¤¾ç¾¤å¥—ä»¶è±å¯Œçš„ [markdown-it](https://github.com/markdown-it/markdown-it)ã€‚æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥åƒè€ƒ [`lib/markdown.js`](https://github.com/Yukaii/daily-oops/blob/main/lib/markdown.js)ã€‚\n\nå€¼å¾—ç‚«è€€çš„æ˜¯ç¨‹å¼ç¢¼å€å¡Šçš„æ¸²æŸ“æ•´å€‹å¾é›¶é–‹å§‹ï¼Œé«˜ä»¿ GitHub æ¡ç”¨ Table æ’ç‰ˆï¼Œé™¤äº†æœ‰è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼Œé‚„æœ‰==è¡Œè™Ÿæ¨™è‰²==ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\n\n| ![](https://hackmd.io/_uploads/HJ0he3ROd.png) | ![](https://hackmd.io/_uploads/HkVTe2R_u.png) |\n| --------------------------------------------- | --------------------------------------------- |\n|                                               |                                               |\n\nç‚ºäº†è®“ç¨‹å¼ç¢¼å€å¡Šçš„æ¨™è‰²å’Œ GitHub å®Œå…¨ä¸€è‡´ï¼Œé‚„æ ¹æ“š Primer é¡è‰²ç³»çµ±ç”¢ç”Ÿäº† [GitHub ç”¨çš„ Highlightjs ä¸»é¡Œ](https://github.com/Yukaii/github-highlightjs-themes)ï¼Œå¯¦ä½œä¸Šå‰‡åƒè€ƒäº† [GitHub VSCode çš„ä¸»é¡Œ](https://github.com/primer/github-vscode-theme)ã€‚\n\n![](https://hackmd.io/_uploads/BkarZ20O_.png \"GitHub highlight.js Theme\")\n  \n## å¾ŒçºŒè¨ˆåŠƒ\n\nè›¤ä¸æ˜¯æ”¹ç‰ˆæ”¹ä¸€æ”¹å°±å¥½äº†å“¦ï¼Ÿé›–ç„¶æ•´å€‹ç¶²ç«™å¤§è‡´å·²å®Œæˆï¼Œä½†é‚„æ˜¯[å°‘äº†äº›æ±è¥¿](https://github.com/Yukaii/daily-oops/issues)ï¼Œåƒæ˜¯ï¼š\n\n- ç«™å…§æœå°‹\n- èˆŠç«™è½‰ç§»\n\nä¹Ÿåªèƒ½æ…¢æ…¢åšå•¦ï¼ä¸€å¦‚å¾€å¸¸ã€‚\n","title":"æŠŠ HackMD ç•¶åšéƒ¨è½æ ¼å¾Œè‡º feat. Next.js","params":{"year":"2021","month":"05","day":"16","slug":"hackmd-as-cms-blog-feat-next-js"},"disqus":{"shortname":"dailyoops","domain":"yukaii.tw"},"noteId":"XJfZL2ZnQtS5XLZyKHbB7Q","meta":{"image":"https://hackmd.io/_uploads/ryr7ih0_u.png"}},"__N_SSG":true}