{"pageProps":{"content":"\n# 用 Postman Proxy 來逆向 HTTPS API\n\n記錄如何透過 Postman 的 HTTP Proxy 設定，來逆向各種 app 的 HTTP API。步驟大致上為：\n\n1. 導入 Postman 的根憑證到裝置\n1. 打開 Postman 的 HTTP Proxy\n1. 設定裝置的 Proxy 連線\n1. Start Hacking！\n\n附圖說明以 iOS 為例，各裝置應該都差不多。\n\n## 1. 導入 Postman 的根憑證到裝置\n\n詳見 [Postman 的文件](https://learning.postman.com/docs/sending-requests/capturing-request-data/capturing-http-requests/)，macOS 和 Windows 路徑不一樣，這裡提供 macOS 的：\n\n```bash\nopen ~/Library/Application\\ Support/Postman/proxy/\n```\n\n如果是要逆向 iOS 的，要把憑證檔 `postman-proxy-ca.crt` 丟到裝置上安裝，我是用 Airdrop 直接做，大家可以透過其他的方式，比如 iCloud/Dropbox 等。\n\n安裝後，要在 iOS 上設定一律信任，這邊放圖。\n\n![](https://hackmd.io/_uploads/rksBP7I9_.png \"點選：已下載描述檔\" =300x )\n\n\n![](https://hackmd.io/_uploads/By6gu7L9d.png \"點「安裝」\" =300x)\n\n![](https://hackmd.io/_uploads/HkTZd7U9_.png =300x)\n\n![](https://hackmd.io/_uploads/BkQQdQIqu.png \"到「關於本機」-> 「信任憑證設定」設為信任\" =300x)\n\n## 2. 打開 Postman 的 HTTP Proxy\n\n把右上角那個很像雷達的按鈕按開，Capture Reqeusts 打開。這裡要記下你電腦的 IP。\n\n![](https://hackmd.io/_uploads/r1pLdmU9O.png)\n\n## 3. 設定裝置的 Proxy 連線\n\n![](https://hackmd.io/_uploads/ByjsFXL9O.png \"網路連線旁邊那個 i 點進來\" =300x)\n\n![](https://hackmd.io/_uploads/S1H3FXL5u.png \"填上剛剛記錄的 IP 位址\" =300x)\n\n\n## Start Hacking！\n\n在 Postman 的 History 就可以看到各種 Request 源源不絕抓進來啦，舒服。\n\n\n## Appendix SSL Pinning\n\n- https://security.stackexchange.com/a/231631\n- https://fadeevab.com/frida-gadget-injection-on-android-no-root-2-methods/\n- https://www.cyclon3.com/bypass-facebook-ssl-certificate-pinning-for-ios\n\niOS 的話一定要 jailbreak device，所以暫且就先這樣吧 :joy:","title":"用 Postman Proxy 來逆向 HTTPS API","params":{"year":"2021","month":"06","day":"03","slug":"postman-proxy"},"disqus":{"shortname":"dailyoops","domain":"yukaii.tw"},"noteId":"ZSCxRHdaQ7SzPM5CjWgr_w","meta":{"date":"2021-06-3 21:28"}},"__N_SSG":true}